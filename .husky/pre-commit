#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ” Running pre-commit security and lint checks..."

# Run security scan
echo "ğŸ” Scanning for security vulnerabilities..."
node scripts/security-scan.js
if [ $? -ne 0 ]; then
  echo "âŒ Security scan failed. Commit aborted."
  exit 1
fi

# Run lint-staged
echo "ğŸ“ Running linting on staged files..."
npx lint-staged
if [ $? -ne 0 ]; then
  echo "âŒ Linting failed. Commit aborted."
  exit 1
fi

echo "âœ… All checks passed!"
